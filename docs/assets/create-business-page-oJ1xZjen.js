import{d as V,r as t,C as c,a as v,e as f,b as o,w as g,F as C,u as E,g as i,D as x,E as b,n as h,i as w,j as y,t as T,q as F,B as U,s as M,p as P}from"./index-vIb5OWY2.js";import{S as j}from"./Section-CrTtE6A5.js";import{_ as d}from"./Separator.vue_vue_type_script_setup_true_lang-DN1_jlAj.js";import{B as q}from"./BusinessService-BG9-plmJ.js";import"./fetchClient-DCrkY20S.js";const z={key:0},H=V({__name:"create-business-page",setup(A){var p;const _=E(),k=(p=window.Telegram)==null?void 0:p.WebApp,a=t(""),l=t(""),n=t(!1),m=t(!1),s=t(""),B=async S=>{var e,r;!a.value.length||!l.value.length||m.value||(n.value=!0,m.value=!0,await q.create({name:a.value,blocking:!1,owner:((r=(e=k.initDataUnsafe)==null?void 0:e.user)==null?void 0:r.id)||-1}).then(u=>{if("detail"in u)return s.value=u.detail,console.log("[error]",u.detail);_.push({name:"ProfileBusinessPage"}),s.value=""}))},D=c(()=>n.value&&a.value.length===0),N=c(()=>n.value&&l.value.length===0);return(S,e)=>(v(),f(C,null,[o(d),o(j,{class:"rounded-b-3xl"},{default:g(()=>[i("form",{onSubmit:P(B,["prevent"]),class:"flex flex-col gap-6"},[x(i("input",{class:h(w(y)("w-full h-[40px] px-6 rounded-xl border border-gray-dark placeholder:border-gray-dark text-[1.6rem] outline-none",{"border-red-500":D.value})),placeholder:"Название бизнеса","onUpdate:modelValue":e[0]||(e[0]=r=>a.value=r)},null,2),[[b,a.value]]),x(i("textarea",{class:h(w(y)("w-full px-6 py-5 rounded-xl border border-gray-dark placeholder:border-gray-dark text-[1.6rem] outline-none",{"border-red-500":N.value})),rows:"6",placeholder:"Описание","onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r)},null,2),[[b,l.value]]),s.value?(v(),f("div",z,"Error: "+T(s.value),1)):F("",!0),o(U,{className:"bg-primary hover:bg-primary-hover rounded-xl text-[1.4rem] text-white"},{default:g(()=>e[2]||(e[2]=[M("Создать бизнес")])),_:1})],32)]),_:1}),o(d),o(d)],64))}});export{H as default};
