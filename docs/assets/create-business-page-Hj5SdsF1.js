import{d as V,r as t,C as p,a as c,e as v,b as s,w as f,F as C,u as E,g as i,D as g,E as x,n as b,i as h,j as w,t as T,q as F,B as U,s as M,p as P}from"./index-Pu0qrdfr.js";import{S as j}from"./Section-DHGfd806.js";import{_ as y}from"./Separator.vue_vue_type_script_setup_true_lang-CI9X2i_X.js";import{B as q}from"./BusinessService-BG9-plmJ.js";import"./fetchClient-DCrkY20S.js";const z={key:0},H=V({__name:"create-business-page",setup(A){var m;const _=E(),k=(m=window.Telegram)==null?void 0:m.WebApp,a=t(""),o=t(""),n=t(!1),d=t(!1),l=t(""),B=async S=>{var e,r;!a.value.length||!o.value.length||d.value||(n.value=!0,d.value=!0,await q.create({name:a.value,blocking:!1,owner:((r=(e=k.initDataUnsafe)==null?void 0:e.user)==null?void 0:r.id)||-1}).then(u=>{if("detail"in u)return l.value=u.detail,console.log("[error]",u.detail);_.push({name:"ProfileBusinessPage"}),l.value=""}))},D=p(()=>n.value&&a.value.length===0),N=p(()=>n.value&&o.value.length===0);return(S,e)=>(c(),v(C,null,[s(y),s(j,{class:"rounded-b-3xl"},{default:f(()=>[i("form",{onSubmit:P(B,["prevent"]),class:"flex flex-col gap-6"},[g(i("input",{class:b(h(w)("w-full h-[40px] px-6 rounded-xl border border-gray-dark placeholder:border-gray-dark text-[1.6rem] outline-none",{"border-red-500":D.value})),placeholder:"Название бизнеса","onUpdate:modelValue":e[0]||(e[0]=r=>a.value=r)},null,2),[[x,a.value]]),g(i("textarea",{class:b(h(w)("w-full px-6 py-5 rounded-xl border border-gray-dark placeholder:border-gray-dark text-[1.6rem] outline-none",{"border-red-500":N.value})),rows:"6",placeholder:"Описание","onUpdate:modelValue":e[1]||(e[1]=r=>o.value=r)},null,2),[[x,o.value]]),l.value?(c(),v("div",z,"Error: "+T(l.value),1)):F("",!0),s(U,{className:"bg-primary hover:bg-primary-hover rounded-xl text-[1.4rem] text-white"},{default:f(()=>e[2]||(e[2]=[M("Создать бизнес")])),_:1})],32)]),_:1}),s(y)],64))}});export{H as default};
